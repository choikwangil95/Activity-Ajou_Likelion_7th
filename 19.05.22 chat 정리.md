# Django에서 Chat 구현

## 1 ) Websocket?
- WebSocket은 컴퓨터 네트워크용 통신 규약의 하나이다. ( ws:// )
- WebSocket은 서버와 클라이언트 간에 socket connection을 유지해서 언제든 양방향 통신 또는 데이터 전송이 가능하도록 하는 기술
- 즉, 웹소켓(Websocket)은 서버와 클라이언트 간의 효율적인 양방향 통신을 실현하기 위한 구조
- 웹소켓을 사용하면 <strong>하나의 HTTP 접속</strong>으로 <strong>양방향 메시지</storng>를 주고받을 수 있다.
- 이 기술을 적용하여서 현재 Real-time web application 구현을 위해 널리 사용

## 2 ) Channels를 이용하여 Django에서 Websocket 사용하기
- `Django-Channels` 는 Django 내에서 HTTP 프로토콜이 아닌 다른 프로토콜들을 사용할 수 있게 해준다. 
- 일반적으로는 `Websocket`을 사용하기 위해 많이 쓰이는 듯 하다.

### 일반적으로 django 가 request / response를 다루는 방식
![image](https://darkblank.github.io/assets/statics/monaegi/channel1.png)

- 위 그림은 반이중방식이라고 한다. 즉 요청이 들어왔을때 응답만 반환하는?
- 하지만 `Websocket`은 전이중방식이여서 django와 같은 반이중방식에서는 사용할 수 없다고 한다. 

### Channels을 사용한 django의 전이중방식
![image](https://darkblank.github.io/assets/statics/monaegi/channel2.png)

- 위의 사진을 보면 중간에 `channels Layer`라는 것이 생겨서 HTTP request/response 외에도 `Websocket message`들도 처리할 수 있다고 한다.
- 참고로 Channels에서는 기존의 WSGI와는 다른 ASGI라는 것이 등장한다. ASGI는 WSGI와 유사하지만 더 많은 프로토콜 유형들을 지원함으로써 Websocket 통신이 가능하게 한다.
